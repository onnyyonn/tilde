var InstantClick=function(e,n){var o,a,c,m,v,C,k,A,M,F,x=navigator.userAgent,K=x.indexOf(' CriOS/')>-1,S='createTouch'in e,t={},s=!1,f=!1,b=!1,u=!1,E=!1,l={},p=!1,r=!1,_=[],w={fetch:[],receive:[],wait:[],change:[]};function g(e){var t=e.indexOf('#');return t<0?e:e.substr(0,t)}function O(e){for(;e&&e.nodeName!='A';)e=e.parentNode;return e}function G(e){do{if(!e.hasAttribute)break;if(e.hasAttribute('data-instant'))return!1;if(e.hasAttribute('data-no-instant'))return!0}while(e=e.parentNode)return!1}function Y(e){do{if(!e.hasAttribute)break;if(e.hasAttribute('data-no-instant'))return!1;if(e.hasAttribute('data-instant'))return!0}while(e=e.parentNode)return!1}function y(e){var t=n.protocol+'//'+n.host;return!(e.target||e.hasAttribute('download')||e.href.indexOf(t+'/')!=0||e.href.indexOf('#')>-1&&g(e.href)==a||(F?!Y(e):G(e)))}function d(n,i,s,o){for(var e,a=!1,t=0;t<w[n].length;t++)n=='receive'?(e=w[n][t](i,s,o),e&&('body'in e&&(s=e.body),'title'in e&&(o=e.title),a=e)):w[n][t](i,s,o);return a}function T(o,l,u,n,c){if(e.documentElement.replaceChild(l,e.body),Q(u),n){history.pushState(null,null,n);var s,r=n.indexOf('#'),t=r>-1&&e.getElementById(n.substr(r+1)),i=0;if(t)for(;t.offsetParent;)i+=t.offsetTop,t=t.offsetParent;scrollTo(0,i),a=g(n)}else scrollTo(0,c);K&&e.title==o?e.title=o+String.fromCharCode(160):e.title=o,N(),m.done(),d('change',!1),s=e.createEvent('HTMLEvents'),s.initEvent('instantclick:newpage',!0,!0),dispatchEvent(s)}function z(){p=!1,r=!1}function q(e){return e.replace(/<noscript[\s\S]+<\/noscript>/gi,'')}const U=/stylesheet/;function L(e,t){for(const n of e.children){let s;switch(n.tagName){case'LINK':const e=n.getAttribute('rel')||'';e&&!U.test(e)&&(s=e);break;case'META':const t=n.getAttribute('name')||'',o=n.getAttribute('property')||'';(t||o)&&(s=`${t}-${o}`);break}s&&t(n,`${n.tagName}-${s}`)}}function R(t){const e={};return L(t,(t,n)=>{e[n]=t.outerHTML}),e}function Q(t){L(e.head,(n,s)=>{const e=t[s];e&&(n.outerHTML=e)})}function H(t){if(k>+new Date-500)return;var e=O(t.target);if(!e||!y(e))return;h(e.href)}function P(t){if(k>+new Date-500)return;var e=O(t.target);if(!e||!y(e))return;e.addEventListener('mouseout',$),C?(M=e.href,c=setTimeout(h,C)):h(e.href)}function B(t){k=+new Date;var e=O(t.target);if(!e||!y(e))return;v?e.removeEventListener('mousedown',H):e.removeEventListener('mouseover',P),h(e.href)}function V(e){var t=O(e.target);if(!t||!y(t))return;if(e.which>1||e.metaKey||e.ctrlKey)return;e.preventDefault(),D(t.href)}function $(){if(c){clearTimeout(c),c=!1;return}if(!p||r)return;o.abort(),z()}function W(){if(o.readyState<4)return;if(o.status==0)return;if(l.ready=+new Date-l.start,o.getResponseHeader('Content-Type').match(/\/(x|ht|xht)ml/)){n=e.implementation.createHTMLDocument(''),n.documentElement.innerHTML=q(o.responseText),f=n.title,u=n.body,E=R(n.head),i=d('receive',s,u,f),i&&('body'in i&&(u=i.body),'title'in i&&(f=i.title)),c=g(s),t[c]={body:u,title:f,head:E,scrollY:c in t?t[c].scrollY:0};for(var n,i,a,c,h,j,p=n.head.children,v=0,m=p.length-1;m>=0;m--)if(a=p[m],a.hasAttribute('data-instant-track')){j=a.getAttribute('href')||a.getAttribute('src')||a.innerHTML;for(h=_.length-1;h>=0;h--)_[h]==j&&v++}v!=_.length&&(b=!0)}else b=!0;r&&(r=!1,D(s))}function N(r){if(e.body.addEventListener('touchstart',B,!0),v?e.body.addEventListener('mousedown',H,!0):e.body.addEventListener('mouseover',P,!0),e.body.addEventListener('click',V,!0),!r){var t,n,s,a,o=e.body.getElementsByTagName('script');for(i=0,j=o.length;i<j;i++){if(t=o[i],t.hasAttribute('data-no-instant'))continue;n=e.createElement('script'),t.src&&(n.src=t.src),t.innerHTML&&(n.innerHTML=t.innerHTML),s=t.parentNode,a=t.nextSibling,s.removeChild(t),s.insertBefore(n,a)}}}function h(e){if(!v&&'display'in l&&+new Date-(l.start+l.display)<100)return;if(c&&(clearTimeout(c),c=!1),e||(e=M),p&&(e==s||r))return;p=!0,r=!1,s=e,u=!1,b=!1,l={start:+new Date},d('fetch'),o.open('GET',e),o.send()}function D(e){if('display'in l||(l.display=+new Date-l.start),c||!p){if(c&&s&&s!=e){n.href=e;return}h(e),m.start(0,!0),d('wait'),r=!0;return}if(r){n.href=e;return}if(b){n.href=s;return}if(!u){m.start(0,!0),d('wait'),r=!0;return}t[a].scrollY=pageYOffset,z(),T(f,u,E,s)}m=function(){var t,n,s,o,i;function h(){t=e.createElement('div'),t.id='instantclick',n=e.createElement('div'),n.id='instantclick-bar',n.className='instantclick-bar',t.appendChild(n);var s,i,c,a=['Webkit','Moz','O'];if(o='transform',!(o in n.style))for(s=0;s<3;s++)a[s]+'Transform'in n.style&&(o=a[s]+'Transform');if(i='transition',!(i in n.style))for(s=0;s<3;s++)a[s]+'Transition'in n.style&&(i='-'+a[s].toLowerCase()+'-'+i);c=e.createElement('style'),c.innerHTML='#instantclick{position:'+(S?'absolute':'fixed')+';top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;'+i+':opacity .25s .1s}'+'.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;'+i+':all .25s}',e.head.appendChild(c),S&&(r(),addEventListener('resize',r),addEventListener('scroll',r))}function c(n,o){s=n,e.getElementById(t.id)&&e.body.removeChild(t),t.style.opacity='1',e.getElementById(t.id)&&e.body.removeChild(t),a(),o&&setTimeout(u,0),clearTimeout(i),i=setTimeout(l,500)}function u(){s=10,a()}function l(){s+=1+Math.random()*2,s>=98?s=98:i=setTimeout(l,500),a()}function a(){n.style[o]='translate('+s+'%)',e.getElementById(t.id)||e.body.appendChild(t)}function d(){if(e.getElementById(t.id)){clearTimeout(i),s=100,a(),t.style.opacity='0';return}c(s==100?0:s),setTimeout(d,0)}function r(){t.style.left=pageXOffset+'px',t.style.width=innerWidth+'px',t.style.top=pageYOffset+'px';var e='orientation'in window&&Math.abs(orientation)==90,n=innerWidth/screen[e?'height':'width']*2;t.style[o]='scaleY('+n+')'}return{init:h,start:c,done:d}}(),A='pushState'in history&&(!x.match('Android')||x.match('Chrome/'))&&n.protocol!="file:";function X(){if(a)return;if(!A){d('change',!0);return}for(var i,r,c,l,s=arguments.length-1;s>=0;s--)i=arguments[s],i===!0?F=!0:i=='mousedown'?v=!0:typeof i=='number'&&(C=i);a=g(n.href),t[a]={body:e.body,title:e.title,head:R(e.head),scrollY:pageYOffset},c=e.head.children;for(s=c.length-1;s>=0;s--)r=c[s],r.hasAttribute('data-instant-track')&&(l=r.getAttribute('href')||r.getAttribute('src')||r.innerHTML,_.push(l));o=new XMLHttpRequest,o.addEventListener('readystatechange',W),N(!0),m.init(),d('change',!0),addEventListener('popstate',function(){var e=g(n.href);if(e==a)return;if(!(e in t)){n.href=n.href;return}t[a].scrollY=pageYOffset,a=e,T(t[e].title,t[e].body,t[e].head,!1,t[e].scrollY)})}function I(e,t){w[e].push(t)}return{supported:A,init:X,on:I}}(document,location)